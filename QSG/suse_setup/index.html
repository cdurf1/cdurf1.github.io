
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Distributed Asynchronous Object Storage">
      
      
      
        <meta name="author" content="DAOS Project">
      
      
        <link rel="canonical" href="http://daos.io/v1.2/QSG/suse_setup/">
      
      <link rel="icon" href="../../daos_logo_wh.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.6">
    
    
      
        <title>openSUSE Setup - DAOS v1.2</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.802231af.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#02a6f2">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Ubuntu";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="blue">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#daos-set-up-on-opensuse" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="http://daos.io" title="DAOS v1.2" class="md-header__button md-logo" aria-label="DAOS v1.2" data-md-component="logo">
      
  <img src="../../daos_logo_wh.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DAOS v1.2
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              openSUSE Setup
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
      <div class="md-header__source">
        
<a href="https://github.com/daos-stack/daos/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    daos-stack/daos
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../overview/terminology/" class="md-tabs__link">
        Architecture Overview
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../setup/" class="md-tabs__link md-tabs__link--active">
        Installation and Setup
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../admin/hardware/" class="md-tabs__link">
        Administration Guide
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../user/container/" class="md-tabs__link">
        User Guide
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../autotest/" class="md-tabs__link">
        Test and Benchmarking
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../release/release_notes_v1_2/" class="md-tabs__link">
        Releases
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../dev/development/" class="md-tabs__link">
        Developer Zone
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="https://wiki.hpdd.intel.com" class="md-tabs__link">
      Community Wiki
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="https://wiki.hpdd.intel.com/display/DC/Roadmap/" class="md-tabs__link">
      Roadmap
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="https://daos.groups.io/g/daos" class="md-tabs__link">
      Mailing list
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="https://jira.hpdd.intel.com/projects/DAOS" class="md-tabs__link">
      Issue tracker
    </a>
  </li>

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="http://daos.io" title="DAOS v1.2" class="md-nav__button md-logo" aria-label="DAOS v1.2" data-md-component="logo">
      
  <img src="../../daos_logo_wh.png" alt="logo">

    </a>
    DAOS v1.2
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/daos-stack/daos/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    daos-stack/daos
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Architecture Overview
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Architecture Overview" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Architecture Overview
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/terminology/" class="md-nav__link">
        Terminology
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/architecture/" class="md-nav__link">
        Architecture
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/storage/" class="md-nav__link">
        Storage Model
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/transaction/" class="md-nav__link">
        Transaction Model
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/fault/" class="md-nav__link">
        Fault Model
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/security/" class="md-nav__link">
        Security Model
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      <label class="md-nav__link" for="__nav_3">
        Installation and Setup
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Installation and Setup" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Installation and Setup
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../setup/" class="md-nav__link">
        CentOS Setup
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          openSUSE Setup
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        openSUSE Setup
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rpm-installation" class="md-nav__link">
    RPM Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hardware-provisioning" class="md-nav__link">
    Hardware Provisioning
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generate-certificates" class="md-nav__link">
    Generate certificates
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-configuration-files" class="md-nav__link">
    Create Configuration Files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-the-daos-servers" class="md-nav__link">
    Start the DAOS Servers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-the-daos-agents" class="md-nav__link">
    Start the DAOS Agents
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tour/" class="md-nav__link">
        Admin/Client Tools
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../test_index/" class="md-nav__link">
        Test and Benchmarking
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="https://wiki.hpdd.intel.com/display/DC/DAOS+IO-500+Instructions" class="md-nav__link">
        IO500 Setup
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Administration Guide
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Administration Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Administration Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../admin/hardware/" class="md-nav__link">
        Hardware Requirements
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../admin/installation/" class="md-nav__link">
        Software Installation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../admin/predeployment_check/" class="md-nav__link">
        Pre-deployment Checklist
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../admin/deployment/" class="md-nav__link">
        System Deployment
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../admin/administration/" class="md-nav__link">
        System Administration
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../admin/pool_operations/" class="md-nav__link">
        Pool Operations
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../admin/tiering_uns/" class="md-nav__link">
        Tiering and Unified Namespace
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../admin/performance_tuning/" class="md-nav__link">
        Performance Tuning
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../admin/troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../admin/utilities_examples/" class="md-nav__link">
        Utilities and Usage Examples
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../admin/env_variables/" class="md-nav__link">
        Environment Variables
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        User Guide
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="User Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          User Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../user/container/" class="md-nav__link">
        Container Management
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../user/interface/" class="md-nav__link">
        Native Programming Interface
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../user/posix/" class="md-nav__link">
        POSIX Namespace
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../user/mpi-io/" class="md-nav__link">
        MPI-IO Support
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../user/hdf5/" class="md-nav__link">
        HDF5 Support
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../user/spark/" class="md-nav__link">
        Spark and Hadoop
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        Test and Benchmarking
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Test and Benchmarking" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Test and Benchmarking
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../autotest/" class="md-nav__link">
        Run DAOS Autotest
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../cartselftest/" class="md-nav__link">
        Run CaRT Self_test
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../runior/" class="md-nav__link">
        Run IOR
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../mdtest/" class="md-nav__link">
        Run mdtest
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../dbench/" class="md-nav__link">
        Run dbench
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../datamover/" class="md-nav__link">
        Datamover test
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      <label class="md-nav__link" for="__nav_7">
        Releases
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Releases" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Releases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release/release_notes_v1_2/" class="md-nav__link">
        Release Notes v1.2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release/support_matrix/" class="md-nav__link">
        Support Matrix
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      <label class="md-nav__link" for="__nav_8">
        Developer Zone
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Developer Zone" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Developer Zone
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/development/" class="md-nav__link">
        Dev Environment
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/daos-stack/daos/blob/master/src/README.md" class="md-nav__link">
        DAOS Internals
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../html/" class="md-nav__link">
        DAOS API Documentation
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://wiki.hpdd.intel.com" class="md-nav__link">
        Community Wiki
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://wiki.hpdd.intel.com/display/DC/Roadmap/" class="md-nav__link">
        Roadmap
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://daos.groups.io/g/daos" class="md-nav__link">
        Mailing list
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://jira.hpdd.intel.com/projects/DAOS" class="md-nav__link">
        Issue tracker
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/daos-stack/daos/edit/master/docs/QSG/suse_setup.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="daos-set-up-on-opensuse">DAOS Set-Up on OpenSUSE<a class="headerlink" href="#daos-set-up-on-opensuse" title="Permanent link">&para;</a></h1>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>The purpose of this guide is to provide a user with a set of command lines to quickly setup and use DAOS with POSIX on openSUSE/SLES 15.2.</p>
<p>This document covers installation of the DAOS rpms on openSUSE/SLES 15.2 and updating the DAOS configuration files needed by daos servers.</p>
<p>This guide will also describe how to use dfuse in order to take advantage of DAOS support for POSIX.  
For setup instructions on CentOS, refer to the <a href="../setup/">CentOS setup</a>. 
For more details reference the DAOS administration guide:
<a href="https://daos-stack.github.io/admin/hardware/">https://daos-stack.github.io/admin/hardware/</a></p>
<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permanent link">&para;</a></h2>
<p>This Guide requires a minimum of:</p>
<ul>
<li>1 server with PMEM and SSDs connected via infiniband storage network.</li>
<li>1 client node.</li>
<li>1 admin node without pmem/ssd but on the infiniband storage network.</li>
<li>All nodes have a base openSUSE or SLES 15.2 installed.</li>
</ul>
<p>Install pdsh on the admin node
The following steps require two or more hosts which will be divided up
into admin, client, and server roles.  One node can be used for both the
admin and client node.  All nodes must have:</p>
<ul>
<li>
<p>sudo access configured</p>
</li>
<li>
<p>password-less ssh configured</p>
</li>
<li>
<p>pdsh installed (or some other means of running multiple remote
    commands in parallel)</p>
</li>
</ul>
<p>In addition the server nodes should also have:</p>
<ul>
<li>
<p>an InfiniBand network adapter configured</p>
</li>
<li>
<p>one or more NVMe devices</p>
</li>
<li>
<p>IOMMU is enabled
    <a href="https://daos-stack.github.io/admin/predeployment_check/#enable-iommu-optional">https://daos-stack.github.io/admin/predeployment_check/#enable-iommu-optional</a></p>
</li>
</ul>
<p>For the use of the commands outlined on this page the following shell
variables will need to be defined:</p>
<ul>
<li>
<p>ADMIN_NODE</p>
</li>
<li>
<p>CLIENT_NODES</p>
</li>
<li>
<p>SERVER_NODES</p>
</li>
<li>
<p>ALL_NODES</p>
</li>
</ul>
<p>For example, if one wanted to use node-1 as their admin node, node-2 and
node-3 as client nodes, and node-[4-6] as their server nodes then
these variables would be defined as:</p>
<pre><code class="console">ADMIN_NODE=node-1

CLIENT_NODES=node-2,node-3

SERVER_NODES=node-4,node-5,node-6

ALL_NODES=$ADMIN_NODE,$CLIENT_NODES,$SERVER_NODES
</code></pre>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If a client node is also serving as an admin node, exclude
<code>$ADMIN_NODE</code> from the <code>ALL_NODES</code> assignment to prevent duplication.</p>
<p>For example:</p>
<p><code>ALL_NODES=$CLIENT_NODES,$SERVER_NODES</code></p>
</div>
<h2 id="rpm-installation">RPM Installation<a class="headerlink" href="#rpm-installation" title="Permanent link">&para;</a></h2>
<p>In this section the required RPMs will be installed on each of the nodes
based upon their role.  Admin and client nodes require the installation
of the daos-client RPM and the server nodes require the installation of the
daos-server RPM.</p>
<ol>
<li>
<p>Configure access to the DAOS package repository at
    <a href="https://packages.daos.io/v1.2">https://packages.daos.io/v1.2</a>.</p>
<pre><code>pdsh -w $ALL_NODES 'sudo zypper ar https://packages.daos.io/v1.2/Leap15/packages/x86_64/ daos_packages'
</code></pre>
</li>
<li>
<p>Import GPG key on all nodes:</p>
<pre><code>pdsh -w $ALL_NODES 'sudo rpm --import'
https://packages.daos.io/RPM-GPG-KEY\
</code></pre>
</li>
<li>
<p>Perform the additional steps:</p>
<pre><code>pdsh -w $ALL_NODES 'sudo zypper --non-interactive refresh'
</code></pre>
</li>
<li>
<p>Install the DAOS server RPMs on the server nodes:</p>
<pre><code>pdsh -w $SERVER_NODES 'sudo zypper install -y daos-server'
</code></pre>
</li>
<li>
<p>Install the DAOS client RPMs on the client and admin nodes:</p>
<pre><code>pdsh -w $ALL_NODES -x $SERVER_NODES 'sudo zypper install -y daos-client'
</code></pre>
</li>
<li>
<p>(Optionally) Install the DAOS test RPMs on the client nodes -
    typically not required</p>
<pre><code>pdsh -w $ALL_NODES -x $SERVER_NODES 'sudo zypper install -y daos-tests'
</code></pre>
</li>
</ol>
<h2 id="hardware-provisioning">Hardware Provisioning<a class="headerlink" href="#hardware-provisioning" title="Permanent link">&para;</a></h2>
<p>In this section, PMem (Intel(R) Optane(TM) persistent memory) and NVME
SSDs will be prepared and configured to be used by DAOS.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>PMem preparation is required once per DAOS installation.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For OpenSUSE 15.2 installation, update ipmctl to the latest package available from https://build.opensuse.org/package/binaries/hardware:nvdimm/ipmctl/openSUSE_Leap_15.2</p>
</div>
<ol>
<li>
<p>Prepare the pmem devices on Server nodes:</p>
<pre><code>daos_server storage prepare --scm-only
</code></pre>
<p>Sample Script:</p>
<pre><code>Preparing locally-attached SCM\...

Memory allocation goals for SCM will be changed and namespaces
modified, this will be a destructive operation. Please ensure
namespaces are unmounted and locally attached SCM &amp; NVMe devices are
not in use. Please be patient as it may take several minutes and
subsequent reboot maybe required.

Are you sure you want to continue? (yes/no)

yes

A reboot is required to process new SCM memory allocation goals.
</code></pre>
</li>
<li>
<p>Reboot the server node.</p>
</li>
<li>
<p>Run the prepare cmdline again:</p>
<pre><code>daos_server storage prepare --scm-only
</code></pre>
<p>Sample Script:</p>
<pre><code>Preparing locally-attached SCM\...
SCM namespaces:
SCM Namespace   Socket ID   Capacity
-------------   ---------   --------
pmem0           0           3.2 TB
pmem1           0           3.2 TB
</code></pre>
</li>
<li>
<p>Prepare the NVME devices on Server nodes:</p>
<pre><code>daos_server storage prepare --nvme-only -u root
Preparing locally-attached NVMe storage\...
</code></pre>
</li>
<li>
<p>Scan the available storage on the Server nodes:</p>
<pre><code>daos_server storage scan
Scanning locally-attached storage...

NVMe PCI        Model               FW Revision Socket ID   Capacity
--------        -----               ----------- ---------   --------
0000:5e:00.0    INTEL SSDPE2KE016T8 VDV10170    0           1.6 TB
0000:5f:00.0    INTEL SSDPE2KE016T8 VDV10170    0           1.6 TB
0000:81:00.0    INTEL SSDPED1K750GA E2010475    1           750 GB
0000:da:00.0    INTEL SSDPED1K750GA E2010475    1           750 GB

SCM Namespace   Socket ID   Capacity
-------------   ---------   --------
pmem0           0           3.2 TB
pmem1           1           3.2 TB
</code></pre>
</li>
</ol>
<h2 id="generate-certificates">Generate certificates<a class="headerlink" href="#generate-certificates" title="Permanent link">&para;</a></h2>
<p>In this section certificates will be generated and installed for
encrypting the DAOS control plane communications.</p>
<p>Administrative nodes require the following certificate files:</p>
<ul>
<li>
<p>CA root certificate (daosCA.crt) owned by the current user</p>
</li>
<li>
<p>Admin certificate (admin.crt) owned by the current user</p>
</li>
<li>
<p>Admin key (admin.key) owned by the current user</p>
</li>
</ul>
<p>Client nodes require the following certificate files:</p>
<ul>
<li>
<p>CA root certificate (daosCa.crt) owned by the current user</p>
</li>
<li>
<p>Agent certificate (agent.crt) owned by the daos_agent user</p>
</li>
<li>
<p>Agent key (agent.key) owned by the daos_agent user</p>
</li>
</ul>
<p>Server nodes require the following certificate files:</p>
<ul>
<li>
<p>CA root certificate (daosCA.crt) owned by the daos_server user</p>
</li>
<li>
<p>Server certificate (server.crt) owned by the daos_server user</p>
</li>
<li>
<p>Server key (server.key) owned by the daos_server user</p>
</li>
<li>
<p>A copy of the Client certificate (client.crt) owned by the
    daos_server user</p>
</li>
</ul>
<p>See
<a href="https://daos-stack.github.io/admin/deployment/#certificate-configuration">https://daos-stack.github.io/admin/deployment/#certificate-configuration</a>
for more informaation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following commands are run from the <code>$ADMIN_NODE</code>.</p>
</div>
<ol>
<li>
<p>Generate a new set of certificates:</p>
<pre><code>cd /tmp
/usr/lib64/daos/certgen/gen_certificates.sh
</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These files should be protected from unauthorized access and preserved for future use.</p>
</div>
</li>
<li>
<p>Copy the certificates to a common location on each node in order to
    move them to the final location:</p>
<pre><code>pdsh -S -w $ALL_NODES -x $(hostname -s) scp -r $(hostname -s):/tmp/daosCA /tmp
</code></pre>
</li>
<li>
<p>Copy the certificates to their default location (/etc/daos) on each
    admin node:</p>
<pre><code>pdsh -S -w $ADMIN_NODE sudo cp /tmp/daosCA/certs/daosCA.crt /etc/daos/certs/.
pdsh -S -w $ADMIN_NODE sudo cp /tmp/daosCA/certs/admin.crt /etc/daos/certs/.
pdsh -S -w $ADMIN_NODE sudo cp /tmp/daosCA/certs/admin.key /etc/daos/certs/.
</code></pre>
<div class="admonition note">
<p class="admonition-title">Note<p>If the /etc/daos/certs directory does not exist on the admin nodes then use the following command to create it:</p>
<pre><code>pdsh -S -w $ADMIN_NODES sudo mkdir /etc/daos/certs
</code></pre>
</p>
</div>
</li>
<li>
<p>Copy the certificates to their default location (/etc/daos) on each
    client node:</p>
<pre><code>pdsh -S -w $CLIENT_NODES sudo cp /tmp/daosCA/certs/daosCA.crt /etc/daos/certs/.
pdsh -S -w $CLIENT_NODES sudo cp /tmp/daosCA/certs/agent.crt /etc/daos/certs/.
pdsh -S -w $CLIENT_NODES sudo cp /tmp/daosCA/certs/agent.key /etc/daos/certs/.
</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the /etc/daos/certs directory does not exist on the client nodes, use the following command to create it:</p>
<pre><code>pdsh -S -w $CLIENT_NODES sudo mkdir /etc/daos/certs
</code></pre>
</div>
</li>
<li>
<p>Copy the certificates to their default location (/etc/daos) on each
    server node:</p>
<pre><code>pdsh -S -w $SERVER_NODES sudo cp /tmp/daosCA/certs/daosCA.crt /etc/daos/certs/.
pdsh -S -w $SERVER_NODES sudo cp /tmp/daosCA/certs/server.crt /etc/daos/certs/.
pdsh -S -w $SERVER_NODES sudo cp /tmp/daosCA/certs/server.key /etc/daos/certs/.
pdsh -S -w $SERVER_NODES sudo cp /tmp/daosCA/certs/agent.crt /etc/daos/certs/clients/agent.crt
</code></pre>
</li>
<li>
<p>Set the ownership of the admin certificates on each admin node:</p>
<pre><code>pdsh -S -w $ADMIN_NODE sudo chown $USER:$USER /etc/daos/certs/daosCA.crt
pdsh -S -w $ADMIN_NODE sudo chown $USER:$USER /etc/daos/certs/admin.*
</code></pre>
</li>
<li>
<p>Set the ownership of the client certificates on each client node:</p>
<pre><code>pdsh -S -w $CLIENT_NODES sudo chown $USER:$USER /etc/daos/certs/daosCA.crt
pdsh -S -w $CLIENT_NODES sudo chown daos_agent:daos_agent /etc/daos/certs/agent.*
</code></pre>
</li>
<li>
<p>Set the ownership of the server certificates on each server node:</p>
<pre><code>pdsh -S -w $SERVER_NODES sudo chown daos_server:daos_server /etc/daos/certs/daosCA.crt
pdsh -S -w $SERVER_NODES sudo chown daos_server:daos_server /etc/daos/certs/server.*
pdsh -S -w $SERVER_NODES sudo chown daos_server:daos_server /etc/daos/certs/clients/agent.crt
pdsh -S -w $SERVER_NODES sudo chown daos_server:daos_server /etc/daos/certs/clients
</code></pre>
</li>
</ol>
<h2 id="create-configuration-files">Create Configuration Files<a class="headerlink" href="#create-configuration-files" title="Permanent link">&para;</a></h2>
<p>In this section the <code>daos_server</code>, <code>daos_agent</code>, and dmg command
configuration files will be defined. Examples are available at
<a href="https://github.com/daos-stack/daos/tree/release/1.2/utils/config/examples">https://github.com/daos-stack/daos/tree/release/1.2/utils/config/examples</a></p>
<ol>
<li>
<p>Determine the addresses for the NVMe devices on the server
    nodes:</p>
<pre><code>pdsh -S -w $SERVER_NODES sudo lspci | grep -i nvme
</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Save the addresses of the NVMe devices to use with each DAOS server,
e.g. "81:00.0", from each server node.  This information will be
used to populate the "bdev_list" server configuration parameter
below.</p>
</div>
</li>
<li>
<p>Create a server configuration file by modifying the default
    <code>/etc/daos/daos_server.yml</code> file on the server nodes.</p>
<p>An example of the daos_server.yml is presented below.  Copy the modified server yaml file to all the server nodes at `/etc/daos/daos_server.yml.</p>
<p>More details on configuring the daos_server.yml file are available at <a href="https://wiki.hpdd.intel.com/display/DAOS/Server+configuration+file+details">Server configuration file details</a>.</p>
<pre><code>name: daos_server

access_points: ['node-4']
port: 10001

transport_config:
  allow_insecure: false
  client_cert_dir: /etc/daos/certs/clients
  ca_cert: /etc/daos/certs/daosCA.crt
  cert: /etc/daos/certs/server.crt
  key: /etc/daos/certs/server.key
provider: ofi+verbs;ofi_rxm
socket_dir: /var/run/daos_server
nr_hugepages: 4096
control_log_mask: DEBUG
control_log_file: /tmp/daos_server.log
helper_log_file: /tmp/daos_admin.log
engines:
-
  targets: 8
  nr_xs_helpers: 0
  fabric_iface: ib0
  fabric_iface_port: 31316
  log_mask: INFO
  log_file: /tmp/daos_engine_0.log
  env_vars:
      - CRT_TIMEOUT=30
  scm_mount: /mnt/daos0
  scm_class: dcpm
  scm_list: [/dev/pmem0]
  bdev_class: nvme
  bdev_list: ["0000:81:00.0"]  # generate regular nvme.conf
-
  targets: 8
  nr_xs_helpers: 0
  fabric_iface: ib1
  fabric_iface_port: 31416
  log_mask: INFO
  log_file: /tmp/daos_engine_1.log
  env_vars:
      - CRT_TIMEOUT=30
  scm_mount: /mnt/daos1
  scm_class: dcpm
  scm_list: [/dev/pmem1]
  bdev_class: nvme
  bdev_list: ["0000:83:00.0"]  # generate regular nvme.conf
</code></pre>
</li>
<li>
<p>Copy the modified server yaml file to all the server nodes at <code>/etc/daos/daos_server.yml</code>.</p>
</li>
<li>
<p>Create an agent configuration file by modifying the default <code>/etc/daos/daos_agent.yml</code> file on the client nodes.  The following is an example daos_agent.yml. Copy the modified agent yaml file to all the client nodes at <code>/etc/daos/daos_agent.yml</code>. More details on configuring the daos_agent.yml file are available at <a href="https://wiki.hpdd.intel.com/display/DAOS/Agent+configuration+file+details">Agent configuration file details</a></p>
<pre><code>name: daos_server
access_points: ['node-4']

port: 10001

transport_config:
  allow_insecure: false
  ca_cert: /etc/daos/certs/daosCA.crt
  cert: /etc/daos/certs/agent.crt
  key: /etc/daos/certs/agent.key
runtime_dir: /var/run/daos_agent
log_file: /tmp/daos_agent.log
</code></pre>
</li>
<li>
<p>Create a dmg configuration file by modifying the default <code>/etc/daos/daos_control.yml</code> file on the admin node. The following is an example of the <code>daos_control.yml</code>. More details on configuring the <code>daos_control.yml</code> file are available in the <a href="https://wiki.hpdd.intel.com/display/DAOS/DMG+configuration+file+details">DMG configuration file details</a>.</p>
<pre><code>name: daos_server
port: 10001
hostlist: ['node-4', 'node-5', 'node-6']

transport_config:
  allow_insecure: false
  ca_cert: /etc/daos/certs/daosCA.crt
  cert: /etc/daos/certs/admin.crt
  key: /etc/daos/certs/admin.key
</code></pre>
</li>
</ol>
<h2 id="start-the-daos-servers">Start the DAOS Servers<a class="headerlink" href="#start-the-daos-servers" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Start daos engines on server nodes:</p>
<pre><code>pdsh -S -w $SERVER_NODES "sudo systemctl daemon-reload"
pdsh -S -w $SERVER_NODES "sudo systemctl start daos_server"
</code></pre>
</li>
<li>
<p>Check status and format storage:</p>
<pre><code># check status
pdsh -S -w $SERVER_NODES "sudo systemctl status daos_server"

# if you see following format messages (depending on number of servers), proceed to storage format
wolf-179: May 05 22:21:03 wolf-179.wolf.hpdd.intel.com daos_server[37431]: Metadata format required on instance 0

# format storage
dmg storage format -l $SERVER_NODES --reformat
</code></pre>
</li>
<li>
<p>Verify that all servers have started:</p>
<pre><code># system query from ADMIN_NODE
dmg system query -v

# all the server ranks should show 'Joined' STATE
Rank UUID                                 Control Address  Fault Domain                  State  Reason
---- ----                                 ---------------  ------------                  -----  ------
0    604c4ffa-563a-49dc-b702-3c87293dbcf3 10.8.1.179:10001 /wolf-179.wolf.hpdd.intel.com Joined
1    f0791f98-4379-4ace-a083-6ca3ffa65756 10.8.1.179:10001 /wolf-179.wolf.hpdd.intel.com Joined
2    745d2a5b-46dd-42c5-b90a-d2e46e178b3e 10.8.1.189:10001 /wolf-189.wolf.hpdd.intel.com Joined
3    ba6a7800-3952-46ce-af92-bba9daa35048 10.8.1.189:10001 /wolf-189.wolf.hpdd.intel.com Joined
</code></pre>
</li>
</ol>
<h2 id="start-the-daos-agents">Start the DAOS Agents<a class="headerlink" href="#start-the-daos-agents" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Start the daos agents on the client nodes:</p>
<pre><code># start agents
pdsh -S -w $CLIENT_NODES "sudo systemctl start daos_agent"
</code></pre>
</li>
<li>
<p>(Optional) Check daos_agent status:</p>
<pre><code># check status
pdsh -S -w $CLIENT_NODES "cat /tmp/daos_agent.log"

# Sample output depending on number of client nodes
node-2: agent INFO 2021/05/05 22:38:46 DAOS Agent v1.2 (pid 47580) listening on /var/run/daos_agent/daos_agent.sock
node-3: agent INFO 2021/05/05 22:38:53 DAOS Agent v1.2 (pid 39135) listening on /var/run/daos_agent/daos_agent.sock
</code></pre>
</li>
</ol>
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../setup/" class="md-footer__link md-footer__link--prev" aria-label="Previous: CentOS Setup" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              CentOS Setup
            </div>
          </div>
        </a>
      
      
        
        <a href="../tour/" class="md-footer__link md-footer__link--next" aria-label="Next: Admin/Client Tools" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Admin/Client Tools
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2016 - 2021 Intel Corporation
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.instant", "navigation.top", "navigation.indexes", "toc.integrate", "search.suggest", "search.highlight"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.409db549.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.756773cc.min.js"></script>
      
    
  </body>
</html>