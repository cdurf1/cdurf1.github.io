<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DAOS API Reference: C:/Users/wcdurfey/Documents/HPDD/Pathforward/daos-master/src/rdb/rdb.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Intel_Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DAOS API Reference
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_47cfd8e1bfe036d5f0e1356f79c46fc7.html">rdb</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">rdb.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="rdb_8h_source.html">daos_srv/rdb.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="daos__mgmt__srv_8h_source.html">daos_srv/daos_mgmt_srv.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="daos__server_8h_source.html">daos_srv/daos_server.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="rdb__internal_8h_source.html">rdb_internal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rdb__layout_8h_source.html">rdb_layout.h</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="srv_2pool_8h_source.html">daos_srv/pool.h</a>&gt;</code><br />
</div>
<p><a href="rdb_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:addca8b448ac8b1c3cd941bd6157f54ee"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdb_8c.html#addca8b448ac8b1c3cd941bd6157f54ee">D_LOGFAC</a>&#160;&#160;&#160;DD_FAC(<a class="el" href="structrdb.html">rdb</a>)</td></tr>
<tr class="separator:addca8b448ac8b1c3cd941bd6157f54ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8882a1544ea416d3d09efddf62df1dee"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdb_8c.html#a8882a1544ea416d3d09efddf62df1dee">rdb_create</a> (const char *path, const uuid_t uuid, size_t <a class="el" href="cross__conn__test_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>, const d_rank_list_t *ranks)</td></tr>
<tr class="separator:a8882a1544ea416d3d09efddf62df1dee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08c5108f853dedf450228a5693e4a9d3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdb_8c.html#a08c5108f853dedf450228a5693e4a9d3">rdb_destroy</a> (const char *path)</td></tr>
<tr class="separator:a08c5108f853dedf450228a5693e4a9d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace98ac3f91ae1dcc64c4b72781650197"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdb_8c.html#ace98ac3f91ae1dcc64c4b72781650197">rdb_get</a> (struct <a class="el" href="structrdb.html">rdb</a> *db)</td></tr>
<tr class="separator:ace98ac3f91ae1dcc64c4b72781650197"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad36090118ffaaf7eb6ac16c1d81c27c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdb_8c.html#ad36090118ffaaf7eb6ac16c1d81c27c5">rdb_put</a> (struct <a class="el" href="structrdb.html">rdb</a> *db)</td></tr>
<tr class="separator:ad36090118ffaaf7eb6ac16c1d81c27c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45bacd6422e137d61067cdf20e2db920"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdb_8c.html#a45bacd6422e137d61067cdf20e2db920">rdb_hash_init</a> (void)</td></tr>
<tr class="separator:a45bacd6422e137d61067cdf20e2db920"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c9c73679cbe67f482f5ae4249a3edc4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdb_8c.html#a9c9c73679cbe67f482f5ae4249a3edc4">rdb_hash_fini</a> (void)</td></tr>
<tr class="separator:a9c9c73679cbe67f482f5ae4249a3edc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acecb66e645a12aa609b6c420a74fa071"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structrdb.html">rdb</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdb_8c.html#acecb66e645a12aa609b6c420a74fa071">rdb_lookup</a> (const uuid_t uuid)</td></tr>
<tr class="separator:acecb66e645a12aa609b6c420a74fa071"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d7c544529a9f7d2cd61c6ae56c8ae37"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdb_8c.html#a8d7c544529a9f7d2cd61c6ae56c8ae37">rdb_start</a> (const char *path, struct <a class="el" href="structrdb__cbs.html">rdb_cbs</a> *cbs, void *arg, struct <a class="el" href="structrdb.html">rdb</a> **dbp)</td></tr>
<tr class="separator:a8d7c544529a9f7d2cd61c6ae56c8ae37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25b96cc678bcefeb2696563e9311ffe5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdb_8c.html#a25b96cc678bcefeb2696563e9311ffe5">rdb_stop</a> (struct <a class="el" href="structrdb.html">rdb</a> *db)</td></tr>
<tr class="separator:a25b96cc678bcefeb2696563e9311ffe5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a082bf8e89377a250bb3aec4df505a7e5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdb_8c.html#a082bf8e89377a250bb3aec4df505a7e5">rdb_resign</a> (struct <a class="el" href="structrdb.html">rdb</a> *db, uint64_t term)</td></tr>
<tr class="separator:a082bf8e89377a250bb3aec4df505a7e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acce0574afa2e00fb8174826009271275"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdb_8c.html#acce0574afa2e00fb8174826009271275">rdb_is_leader</a> (struct <a class="el" href="structrdb.html">rdb</a> *db, uint64_t *term)</td></tr>
<tr class="separator:acce0574afa2e00fb8174826009271275"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d9a7fdcd9bcbcc67290c6235c6394b6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdb_8c.html#a6d9a7fdcd9bcbcc67290c6235c6394b6">rdb_get_leader</a> (struct <a class="el" href="structrdb.html">rdb</a> *db, uint64_t *term, d_rank_t *<a class="el" href="cross__conn__test_8c.html#a6cfd95afd0afebd625b889fb6e58371c">rank</a>)</td></tr>
<tr class="separator:a6d9a7fdcd9bcbcc67290c6235c6394b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a748b0a12535ed5e58e228284d1be5596"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdb_8c.html#a748b0a12535ed5e58e228284d1be5596">rdb_get_ranks</a> (struct <a class="el" href="structrdb.html">rdb</a> *db, d_rank_list_t **ranksp)</td></tr>
<tr class="separator:a748b0a12535ed5e58e228284d1be5596"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a328ae5d800daa99aabb53bf11ddc1d56"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdb_8c.html#a328ae5d800daa99aabb53bf11ddc1d56">rdb_dist_start</a> (const uuid_t uuid, const uuid_t <a class="el" href="simple__array_8c.html#af0550e8571af2e0a92e968b92190db31">pool_uuid</a>, const d_rank_list_t *ranks, bool create, size_t <a class="el" href="cross__conn__test_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>)</td></tr>
<tr class="separator:a328ae5d800daa99aabb53bf11ddc1d56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fd96d2dc357e0a0024e36a74e1212c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdb_8c.html#a8fd96d2dc357e0a0024e36a74e1212c0">rdb_start_handler</a> (crt_rpc_t *rpc)</td></tr>
<tr class="separator:a8fd96d2dc357e0a0024e36a74e1212c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0ded1e5c04c24d14193a56bf498ff3e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdb_8c.html#ad0ded1e5c04c24d14193a56bf498ff3e">rdb_start_aggregator</a> (crt_rpc_t *source, crt_rpc_t *result, void *priv)</td></tr>
<tr class="separator:ad0ded1e5c04c24d14193a56bf498ff3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e2aad2b8e3a9f602f117337b1ee86bf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdb_8c.html#a3e2aad2b8e3a9f602f117337b1ee86bf">rdb_dist_stop</a> (const uuid_t uuid, const uuid_t <a class="el" href="simple__array_8c.html#af0550e8571af2e0a92e968b92190db31">pool_uuid</a>, const d_rank_list_t *ranks, bool destroy)</td></tr>
<tr class="separator:a3e2aad2b8e3a9f602f117337b1ee86bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a998e500950e07776f5e7fdc39c805b8b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdb_8c.html#a998e500950e07776f5e7fdc39c805b8b">rdb_stop_handler</a> (crt_rpc_t *rpc)</td></tr>
<tr class="separator:a998e500950e07776f5e7fdc39c805b8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad347a485e52767fcc35ef6b66844fb89"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rdb_8c.html#ad347a485e52767fcc35ef6b66844fb89">rdb_stop_aggregator</a> (crt_rpc_t *source, crt_rpc_t *result, void *priv)</td></tr>
<tr class="separator:ad347a485e52767fcc35ef6b66844fb89"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="addca8b448ac8b1c3cd941bd6157f54ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addca8b448ac8b1c3cd941bd6157f54ee">&sect;&nbsp;</a></span>D_LOGFAC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define D_LOGFAC&#160;&#160;&#160;DD_FAC(<a class="el" href="structrdb.html">rdb</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>(C) Copyright 2017 Intel Corporation.</p>
<p>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at</p>
<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
<p>GOVERNMENT LICENSE RIGHTS-OPEN SOURCE SOFTWARE The Government's rights to use, modify, reproduce, release, perform, display, or disclose this software are subject to the terms of the Apache License as provided in Contract No. B609815. Any reproduction of computer software, computer software documentation, or portions thereof marked with this legend must also reproduce the markings. rdb: Databases </p>

<p>Definition at line <a class="el" href="rdb_8c_source.html#l00026">26</a> of file <a class="el" href="rdb_8c_source.html">rdb.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a8882a1544ea416d3d09efddf62df1dee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8882a1544ea416d3d09efddf62df1dee">&sect;&nbsp;</a></span>rdb_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rdb_create </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uuid_t&#160;</td>
          <td class="paramname"><em>uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const d_rank_list_t *&#160;</td>
          <td class="paramname"><em>ranks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create an rdb replica at <em>path</em> with <em>uuid</em>, <em>size</em>, and <em>ranks</em>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>replica path </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uuid</td><td>database UUID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>replica size in bytes </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ranks</td><td>list of replica ranks </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="rdb_8c_source.html#l00044">44</a> of file <a class="el" href="rdb_8c_source.html">rdb.c</a>.</p>

</div>
</div>
<a id="a08c5108f853dedf450228a5693e4a9d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08c5108f853dedf450228a5693e4a9d3">&sect;&nbsp;</a></span>rdb_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rdb_destroy </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroy the rdb replica at <em>path</em>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>replica path </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="rdb_8c_source.html#l00122">122</a> of file <a class="el" href="rdb_8c_source.html">rdb.c</a>.</p>

</div>
</div>
<a id="a328ae5d800daa99aabb53bf11ddc1d56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a328ae5d800daa99aabb53bf11ddc1d56">&sect;&nbsp;</a></span>rdb_dist_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rdb_dist_start </td>
          <td>(</td>
          <td class="paramtype">const uuid_t&#160;</td>
          <td class="paramname"><em>uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uuid_t&#160;</td>
          <td class="paramname"><em>pool_uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const d_rank_list_t *&#160;</td>
          <td class="paramname"><em>ranks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>create</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Perform a distributed create, if <em>create</em> is true, and start operation on all replicas of a database with <em>uuid</em> spanning <em>ranks</em>. This method can be called on any rank. If <em>create</em> is false, <em>ranks</em> may be NULL.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">uuid</td><td>database UUID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pool_uuid</td><td>pool UUID (for <a class="el" href="daos__mgmt__srv_8h.html#a8b85701ba2beed841aac4e8e282ce57c">ds_mgmt_tgt_file()</a>) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ranks</td><td>list of replica ranks </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">create</td><td>create replicas first </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>size of each replica in bytes if <em>create</em> </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="rdb_8c_source.html#l00457">457</a> of file <a class="el" href="rdb_8c_source.html">rdb.c</a>.</p>

</div>
</div>
<a id="a3e2aad2b8e3a9f602f117337b1ee86bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e2aad2b8e3a9f602f117337b1ee86bf">&sect;&nbsp;</a></span>rdb_dist_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rdb_dist_stop </td>
          <td>(</td>
          <td class="paramtype">const uuid_t&#160;</td>
          <td class="paramname"><em>uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uuid_t&#160;</td>
          <td class="paramname"><em>pool_uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const d_rank_list_t *&#160;</td>
          <td class="paramname"><em>ranks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>destroy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Perform a distributed stop, and if <em>destroy</em> is true, destroy operation on all replicas of a database with <em>uuid</em> spanning <em>ranks</em>. This method can be called on any rank. <em>ranks</em> may be NULL.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">uuid</td><td>database UUID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pool_uuid</td><td>pool UUID (for <a class="el" href="daos__mgmt__srv_8h.html#a8b85701ba2beed841aac4e8e282ce57c">ds_mgmt_tgt_file()</a>) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ranks</td><td>list of <em>ranks-&gt;rl_nr</em> replica ranks </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">destroy</td><td>destroy after close </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="rdb_8c_source.html#l00576">576</a> of file <a class="el" href="rdb_8c_source.html">rdb.c</a>.</p>

</div>
</div>
<a id="ace98ac3f91ae1dcc64c4b72781650197"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace98ac3f91ae1dcc64c4b72781650197">&sect;&nbsp;</a></span>rdb_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdb_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structrdb.html">rdb</a> *&#160;</td>
          <td class="paramname"><em>db</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="rdb_8c_source.html#l00130">130</a> of file <a class="el" href="rdb_8c_source.html">rdb.c</a>.</p>

</div>
</div>
<a id="a6d9a7fdcd9bcbcc67290c6235c6394b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d9a7fdcd9bcbcc67290c6235c6394b6">&sect;&nbsp;</a></span>rdb_get_leader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rdb_get_leader </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structrdb.html">rdb</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">d_rank_t *&#160;</td>
          <td class="paramname"><em>rank</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get a hint of the current leader, if available.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">db</td><td>database </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">term</td><td>term of current leader </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rank</td><td>rank of current leader</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-DER_NONEXIST</td><td>no leader hint available </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="rdb_8c_source.html#l00414">414</a> of file <a class="el" href="rdb_8c_source.html">rdb.c</a>.</p>

</div>
</div>
<a id="a748b0a12535ed5e58e228284d1be5596"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a748b0a12535ed5e58e228284d1be5596">&sect;&nbsp;</a></span>rdb_get_ranks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rdb_get_ranks </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structrdb.html">rdb</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">d_rank_list_t **&#160;</td>
          <td class="paramname"><em>ranksp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the list of replica ranks. Callers are responsible for <a class="el" href="common_8h.html#abab6680a5dee361f20867bdeee1cc359">daos_rank_list_free(*ranksp)</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">db</td><td>database </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ranksp</td><td>list of replica ranks </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="rdb_8c_source.html#l00437">437</a> of file <a class="el" href="rdb_8c_source.html">rdb.c</a>.</p>

</div>
</div>
<a id="a9c9c73679cbe67f482f5ae4249a3edc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c9c73679cbe67f482f5ae4249a3edc4">&sect;&nbsp;</a></span>rdb_hash_fini()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdb_hash_fini </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="rdb_8c_source.html#l00203">203</a> of file <a class="el" href="rdb_8c_source.html">rdb.c</a>.</p>

</div>
</div>
<a id="a45bacd6422e137d61067cdf20e2db920"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45bacd6422e137d61067cdf20e2db920">&sect;&nbsp;</a></span>rdb_hash_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rdb_hash_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="rdb_8c_source.html#l00187">187</a> of file <a class="el" href="rdb_8c_source.html">rdb.c</a>.</p>

</div>
</div>
<a id="acce0574afa2e00fb8174826009271275"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acce0574afa2e00fb8174826009271275">&sect;&nbsp;</a></span>rdb_is_leader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rdb_is_leader </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structrdb.html">rdb</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>term</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Is this replica in the leader state? True does not guarantee a <em>current</em> leadership.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">db</td><td>database </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">term</td><td>latest term heard of </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="rdb_8c_source.html#l00398">398</a> of file <a class="el" href="rdb_8c_source.html">rdb.c</a>.</p>

</div>
</div>
<a id="acecb66e645a12aa609b6c420a74fa071"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acecb66e645a12aa609b6c420a74fa071">&sect;&nbsp;</a></span>rdb_lookup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structrdb.html">rdb</a>* rdb_lookup </td>
          <td>(</td>
          <td class="paramtype">const uuid_t&#160;</td>
          <td class="paramname"><em>uuid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="rdb_8c_source.html#l00210">210</a> of file <a class="el" href="rdb_8c_source.html">rdb.c</a>.</p>

</div>
</div>
<a id="ad36090118ffaaf7eb6ac16c1d81c27c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad36090118ffaaf7eb6ac16c1d81c27c5">&sect;&nbsp;</a></span>rdb_put()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdb_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structrdb.html">rdb</a> *&#160;</td>
          <td class="paramname"><em>db</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="rdb_8c_source.html#l00138">138</a> of file <a class="el" href="rdb_8c_source.html">rdb.c</a>.</p>

</div>
</div>
<a id="a082bf8e89377a250bb3aec4df505a7e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a082bf8e89377a250bb3aec4df505a7e5">&sect;&nbsp;</a></span>rdb_resign()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdb_resign </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structrdb.html">rdb</a> *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>term</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Resign the leadership in <em>term</em>. If <em>term</em> is not current or this replica is not in leader state, this function does nothing. Otherwise, all TXs in <em>term</em> will eventually abort, and the dc_step_down callback will eventually be called with <em>term</em>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">db</td><td>database </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">term</td><td>term of leadership to resign </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="rdb_8c_source.html#l00385">385</a> of file <a class="el" href="rdb_8c_source.html">rdb.c</a>.</p>

</div>
</div>
<a id="a8d7c544529a9f7d2cd61c6ae56c8ae37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d7c544529a9f7d2cd61c6ae56c8ae37">&sect;&nbsp;</a></span>rdb_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rdb_start </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structrdb__cbs.html">rdb_cbs</a> *&#160;</td>
          <td class="paramname"><em>cbs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structrdb.html">rdb</a> **&#160;</td>
          <td class="paramname"><em>dbp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start an RDB replica at <em>path</em>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>replica path </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cbs</td><td>callbacks (not copied) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>argument for cbs </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dbp</td><td>database </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="rdb_8c_source.html#l00231">231</a> of file <a class="el" href="rdb_8c_source.html">rdb.c</a>.</p>

</div>
</div>
<a id="ad0ded1e5c04c24d14193a56bf498ff3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0ded1e5c04c24d14193a56bf498ff3e">&sect;&nbsp;</a></span>rdb_start_aggregator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rdb_start_aggregator </td>
          <td>(</td>
          <td class="paramtype">crt_rpc_t *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">crt_rpc_t *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>priv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="rdb_8c_source.html#l00554">554</a> of file <a class="el" href="rdb_8c_source.html">rdb.c</a>.</p>

</div>
</div>
<a id="a8fd96d2dc357e0a0024e36a74e1212c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fd96d2dc357e0a0024e36a74e1212c0">&sect;&nbsp;</a></span>rdb_start_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdb_start_handler </td>
          <td>(</td>
          <td class="paramtype">crt_rpc_t *&#160;</td>
          <td class="paramname"><em>rpc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="rdb_8c_source.html#l00502">502</a> of file <a class="el" href="rdb_8c_source.html">rdb.c</a>.</p>

</div>
</div>
<a id="a25b96cc678bcefeb2696563e9311ffe5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25b96cc678bcefeb2696563e9311ffe5">&sect;&nbsp;</a></span>rdb_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdb_stop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structrdb.html">rdb</a> *&#160;</td>
          <td class="paramname"><em>db</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stop an RDB replica <em>db</em>. All TXs in <em>db</em> must be either ended already or blocking only in rdb.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">db</td><td>database </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="rdb_8c_source.html#l00356">356</a> of file <a class="el" href="rdb_8c_source.html">rdb.c</a>.</p>

</div>
</div>
<a id="ad347a485e52767fcc35ef6b66844fb89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad347a485e52767fcc35ef6b66844fb89">&sect;&nbsp;</a></span>rdb_stop_aggregator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rdb_stop_aggregator </td>
          <td>(</td>
          <td class="paramtype">crt_rpc_t *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">crt_rpc_t *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>priv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="rdb_8c_source.html#l00645">645</a> of file <a class="el" href="rdb_8c_source.html">rdb.c</a>.</p>

</div>
</div>
<a id="a998e500950e07776f5e7fdc39c805b8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a998e500950e07776f5e7fdc39c805b8b">&sect;&nbsp;</a></span>rdb_stop_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rdb_stop_handler </td>
          <td>(</td>
          <td class="paramtype">crt_rpc_t *&#160;</td>
          <td class="paramname"><em>rpc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="rdb_8c_source.html#l00616">616</a> of file <a class="el" href="rdb_8c_source.html">rdb.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
