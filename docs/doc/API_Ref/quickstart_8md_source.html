<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DAOS API Reference: C:/Users/wcdurfey/Documents/HPDD/Pathforward/daos-master/doc/quickstart.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Intel_Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DAOS API Reference
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">C:/Users/wcdurfey/Documents/HPDD/Pathforward/daos-master/doc/quickstart.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="quickstart_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;# DAOS Quick Start Guide</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;DAOS runs on both x86 and ARM platforms and has been successfully tested on CentOS7, openSuSE 42.2 and Ubuntu 16.04 distributions.</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;## Hardware Support</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;DAOS requires a 64-bit processor architecture and is primarily developed on x64-64 and AArch64 platforms. Apart from using a popular linux distribution, no special considerations are necessary to build DAOS on 64-bit ARM processors. The same instructions that are used in Xeon are applicable for ARM builds as well, DAOS and its dependencies will make the necessary adjustments automatically in their respective build systems for ARM platforms.</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;Storage-class memory (SCM) can be emulated with DRAM by creating tmpfs mountpoints on the DAOS servers.</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;## Software Dependencies</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;DAOS requires a C99-capable compiler, a golang compiler and the scons build tool. Moreover, the DAOS stack leverages the following open source projects:</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;- [CaRT](https://github.com/daos-stack/cart) that relies on both [Mercury](https://mercury-hpc.github.io) and [Libfabric](https://ofiwg.github.io/libfabric/) for lightweight network transport and [PMIx](https://github.com/pmix/master) for process set management. See the CaRT repository for more information on how to build the CaRT library.</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;- [PMDK](https://github.com/pmem/pmdk.git) for persistent memory programming.</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;- [SPDK](http://spdk.io) for userspace NVMe device access and management.</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;- [ISA-L](https://github.com/01org/isa-l) for checksum and erasure code computation.</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;- [Argobots](https://github.com/pmodels/argobots) for thread management.</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;The DAOS build system can be configured to download and build any missing dependencies automatically.</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;## DAOS Source Code</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;To check out the DAOS source code, run the following command:</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    $ git clone https://github.com/daos-stack/daos.git</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;This clones the DAOS git repository (path referred as \${daospath} below). Then initialize the submodules with:</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    $ cd ${daospath}</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    $ git submodule init</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    $ git submodule update</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;## DAOS in Docker</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;Docker is the fastest way to build, install and run DAOS on a non-Linux system.</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;### Building DAOS in a Container</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;To build the Docker image directly from GitHub, run the following command:</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    $ docker build -t daos -f Dockerfile.centos\:7 github.com/daos-stack/daos#:utils/docker</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;This creates a CentOS7 image, fetches the latest DAOS version from GitHub and  builds it in the container.</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;For Ubuntu, replace Dockerfile.centos\:7 with Dockerfile.ubuntu\:16.04.</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;To build from a local tree stored on the host, a volume must be created to share the source tree with the Docker container. To do so, execute the following command to create a docker image without checking out the DAOS source tree:</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    $ docker build -t daos -f utils/docker/Dockerfile.centos\:7 --build-arg NOBUILD=1 .</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;And then the following command to export the DAOS source tree to the docker container and build it:</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    $ docker run -v ${daospath}:/home/daos/daos:Z daos scons --build-deps=yes USE_INSTALLED=all install</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;### Running DAOS in a Container</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;Let&#39;s first create a container that will run the DAOS service:</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    $ docker run -it -d --name server --tmpfs /mnt/daos:rw,uid=1000,size=1G -v /tmp/uri:/tmp/uri daos</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;Add &quot;-v \${daospath}:/home/daos/daos:Z&quot; to this command line if DAOS source tree is stored on the host.</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;This allocates 1GB of DRAM for DAOS storage. The more, the better.</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;To start the DAOS service in this newly created container, execute the following command:</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    $ docker exec server orterun -H localhost -np 1 --report-uri /tmp/uri/uri.txt daos_server</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;Once the DAOS server is started, the integration tests can be run as follows:</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    $ docker run -v /tmp/uri:/tmp/uri daos \</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      orterun -H localhost -np 1 --ompi-server file:/tmp/uri/uri.txt daos_test</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;Again, &quot;-v \${daospath}:/home/daos/daos:Z&quot; must be added if the DAOS source tree is shared with the host.</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;## DAOS from Scratch</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;The below instructions have been verified with CentOS. Installations on other Linux distributions might be similar with some variations. Please contact us in our [forum](users@daos.groups.io) if running into issues.</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;### Build Prerequisites</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;Please install the following software packages (or equivalent for other distros):</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;On CentOS and openSuSE:</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    $ yum install -y epel-release</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    $ yum install -y git gcc gcc-c++ make cmake golang libtool scons boost-devel</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    $ yum install -y libuuid-devel openssl-devel libevent-devel libtool-ltdl-devel</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    $ yum install -y librdmacm-devel libcmocka libcmocka-devel readline-devel</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    $ yum install -y doxygen pandoc flex patch nasm yasm</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    # Additionally required SPDK packages</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    $ yum install -y CUnit-devel libaio-devel astyle-devel python-pep8 lcov</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    $ yum install -y python clang-analyzer sg3_utils libiscsi-devel</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    $ yum install -y libibverbs-devel numactl-devel doxygen mscgen graphviz</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;On Ubuntu and Debian:</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    $ apt-get install -y git gcc golang make cmake libtool-bin scons autoconf</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    $ apt-get install -y libboost-dev uuid-dev libssl-dev libevent-dev libltdl-dev</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    $ apt-get install -y librdmacm-dev libcmocka0 libcmocka-dev libreadline6-dev</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    $ apt-get install -y curl doxygen pandoc flex patch nasm yasm</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    # Additionally required SPDK packages</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    $ apt-get install -y libibverbs-dev librdmacm-dev libcunit1-dev graphviz</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    $ apt-get install -y libaio-dev sg3-utils libiscsi-dev doxygen mscgen</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;Moreover, please make sure all the auto tools listed below are at the appropriate versions.</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    m4 (GNU M4) 1.4.16</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    flex 2.5.37</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    autoconf (GNU Autoconf) 2.69</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    automake (GNU automake) 1.13.4</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    libtool (GNU libtool) 2.4.2</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;### Building DAOS &amp; Dependencies</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;If all the software dependencies listed previously are already satisfied, then just type the following command in the top source directory to build the DAOS stack:</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    $ scons install</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;Otherwise, the missing dependencies can be built automatically by invoking scons with the following parameters:</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    $ scons --build-deps=yes USE_INSTALLED=all install</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;By default, DAOS and its dependencies are installed under \${daospath}/install. The installation path can be modified by adding the PREFIX= option to the above command line (e.g. PREFIX=/usr/local).</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;### Environment setup</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;Once built, the environment must be modified to search for binaries and header files in the installation path. This step is not required if standard locations (e.g. /bin, /sbin, /usr/lib, ...) are used.</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    CPATH=${daospath}/install/include/:$CPATH</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    PATH=${daospath}/install/bin/:${daospath}/install/sbin:$PATH</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    export CPATH PATH</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;If using bash, PATH can be setup for you after a build by sourcing the script scons_local/utils/setup_local.sh from the daos root.   This script utilizes a file generated by the build to determine the location of daos and its dependencies.</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;If required, \${daospath}/install must be replaced with the alternative path specified through PREFIX. The network type to use as well the debug log location can be selected as follows:</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    export CRT_PHY_ADDR_STR=&quot;ofi+sockets&quot;,</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;   OFI_INTERFACE=eth0, where eth0 is the network device you want to use.</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;   for infiniband you could use ib0 or whichever else pointing to IB device.</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;### Running DAOS</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;DAOS uses orterun(1) for scalable process launch. The list of storage nodes can be specified in an host file (referred as \${hostfile}). The DAOS server and the application can be started seperately, but must share an URI file (referred as \${urifile}) to connect to each other. The \${urifile} is generated by orterun using (\-\-report-uri filename) at server and used at application with (\-\-ompi-server file:filename). In addition, the DAOS server must be started with the \-\-enable-recovery option to support server failure. See the orterun(1) man page for additional options.</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;(a) Starting the DAOS server</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;On each storage node, the DAOS server will use a storage path (specified by --storage or -s) that must be a directory in a tmpfs filesystem, for the time being. If not specified, it is assumed to be /mnt/daos. To configure the storage:</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    $ mount -t tmpfs -o size=&lt;bytes&gt; tmpfs /mnt/daos</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;To start the DAOS server, run:</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    $ orterun -np &lt;num_servers&gt; --hostfile ${hostfile} --enable-recovery --report-uri ${urifile} daos_server</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;By default, the DAOS server will use all the cores available on the storage server. You can limit the number of execution streams with the -c #cores\_to\_use option.</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;Hostfile used here is the same as the ones used by Open MPI. See (https://www.open-mpi.org/faq/?category=running#mpirun-hostfile) for additional details.</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;(b) Creating/destroy a DAOS pool</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;A DAOS pool can be created and destroyed through the DAOS management API (see  daos\_mgmt.h). We also provide an utility called dmg to manage storage pools from the command line.</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;To create a pool:</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    $ orterun --ompi-server file:${urifile} dmg create --size=xxG</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;This creates a pool distributed across the DAOS servers with a target size on each server of xxGB. The UUID allocated to the newly created pool is printed to stdout (referred as \${pooluuid}).</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;To destroy a pool:</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    $ orterun --ompi-server file:${urifile} dmg destroy --pool=${pooluuid}</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;(c) Building applications or I/O middleware against the DAOS library</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;Include the daos.h header file in your program and link with -Ldaos. Examples are available under src/tests.</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;(d) Running applications</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    $ orterun -np &lt;num_clients&gt; --hostfile ${hostfile_cli} --ompi-server file:$urifile ${application} eg., ./daos_test</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;## DAOS for Development</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;For development, it is recommended to build and install each dependency in a unique subdirectory. The DAOS build system supports this through the TARGET\_PREFIX variable. Once the submodules have been initialized and updated, run the following:</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    $ scons PREFIX=$(daos_prefix_path} TARGET_PREFIX=${daos_prefix_path}/opt install --build-deps=yes</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;Installing the components into seperate directories allow to upgrade the components individually replacing --build-deps=yes with --update-prereq={component\_name}. This requires change to the environment configuration from before. For automated environment setup, source scons_local/utils/setup_local.sh.</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    ARGOBOTS=${daos_prefix_path}/opt/argobots</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    CART=${daos_prefix_path}/opt/cart</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    HWLOC=${daos_prefix_path}/opt/hwloc</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    MERCURY=${daos_prefix_path}/opt/mercury</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    PMDK=${daos_prefix_path}/opt/pmdk</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    OMPI=${daos_prefix_path}/opt/ompi</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    OPA=${daos_prefix_path}/opt/openpa</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    PMIX=${daos_prefix_path}/opt/pmix</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    SPDK=${daos_prefix_path}/opt/spdk</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    PATH=$CART/bin/:$OMPI/bin/:${daos_prefix_path}/bin/:$PATH</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;With this approach DAOS would get built using the prebuilt dependencies in ${daos_prefix_path}/opt and required options are saved for future compilations. So, after the first time, during development, a mere &quot;scons&quot; and &quot;scons install&quot; would suffice for compiling changes to daos source code.</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;If you wish to compile DAOS with clang rather than gcc, set COMPILER=clang on the scons command line.   This option is also saved for future compilations.</div></div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
