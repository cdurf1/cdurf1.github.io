<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DAOS API Reference: C:/Users/wcdurfey/Documents/HPDD/Pathforward/daos-master/src/placement/pl_map.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Intel_Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DAOS API Reference
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_a6e80d778a9466aa16bca26331406e5e.html">placement</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">pl_map.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="pl__map_8h_source.html">pl_map.h</a>&quot;</code><br />
<code>#include &lt;gurt/hash.h&gt;</code><br />
</div>
<p><a href="pl__map_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpl__map__dict.html">pl_map_dict</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:addca8b448ac8b1c3cd941bd6157f54ee"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#addca8b448ac8b1c3cd941bd6157f54ee">D_LOGFAC</a>&#160;&#160;&#160;DD_FAC(placement)</td></tr>
<tr class="separator:addca8b448ac8b1c3cd941bd6157f54ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c06f47a5b8cd4d9ac9eade7844341a5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#a6c06f47a5b8cd4d9ac9eade7844341a5">DSR_RING_DOMAIN</a>&#160;&#160;&#160;<a class="el" href="pool__map_8h.html#ae2b30405dd4e58b5ddec88a49ef99724a7b01525b4f152b5e82cc0ea6915a289e">PO_COMP_TP_RACK</a></td></tr>
<tr class="separator:a6c06f47a5b8cd4d9ac9eade7844341a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77be6b09a4f1ea8ffa87b68498a4cda6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#a77be6b09a4f1ea8ffa87b68498a4cda6">PL_HTABLE_BITS</a>&#160;&#160;&#160;7</td></tr>
<tr class="separator:a77be6b09a4f1ea8ffa87b68498a4cda6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a89212de04faaeb1bbbb6089defce0311"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#a89212de04faaeb1bbbb6089defce0311">pl_map_create</a> (struct <a class="el" href="structpool__map.html">pool_map</a> *<a class="el" href="structpool__map.html">pool_map</a>, struct <a class="el" href="structpl__map__init__attr.html">pl_map_init_attr</a> *mia, struct <a class="el" href="structpl__map.html">pl_map</a> **pl_mapp)</td></tr>
<tr class="separator:a89212de04faaeb1bbbb6089defce0311"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bfde06e847f8730c7a3347826eac965"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#a5bfde06e847f8730c7a3347826eac965">pl_map_destroy</a> (struct <a class="el" href="structpl__map.html">pl_map</a> *map)</td></tr>
<tr class="separator:a5bfde06e847f8730c7a3347826eac965"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d8dbc189a310e5ef9f8dcd10e828638"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#a6d8dbc189a310e5ef9f8dcd10e828638">pl_map_print</a> (struct <a class="el" href="structpl__map.html">pl_map</a> *map)</td></tr>
<tr class="separator:a6d8dbc189a310e5ef9f8dcd10e828638"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1f834ae8650c5cb722e54a7e7b664be"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#af1f834ae8650c5cb722e54a7e7b664be">pl_obj_place</a> (struct <a class="el" href="structpl__map.html">pl_map</a> *map, struct <a class="el" href="structdaos__obj__md.html">daos_obj_md</a> *md, struct <a class="el" href="structdaos__obj__shard__md.html">daos_obj_shard_md</a> *shard_md, struct <a class="el" href="structpl__obj__layout.html">pl_obj_layout</a> **layout_pp)</td></tr>
<tr class="separator:af1f834ae8650c5cb722e54a7e7b664be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2c45bb543e9fd4a23a4a9909200e48b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#ad2c45bb543e9fd4a23a4a9909200e48b">pl_obj_find_rebuild</a> (struct <a class="el" href="structpl__map.html">pl_map</a> *map, struct <a class="el" href="structdaos__obj__md.html">daos_obj_md</a> *md, struct <a class="el" href="structdaos__obj__shard__md.html">daos_obj_shard_md</a> *shard_md, uint32_t rebuild_ver, uint32_t *tgt_rank, uint32_t *shard_id)</td></tr>
<tr class="separator:ad2c45bb543e9fd4a23a4a9909200e48b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b4440db1cba8cdf6a945d8c8ebb7ad0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#a4b4440db1cba8cdf6a945d8c8ebb7ad0">pl_obj_find_reint</a> (struct <a class="el" href="structpl__map.html">pl_map</a> *map, struct <a class="el" href="structdaos__obj__md.html">daos_obj_md</a> *md, struct <a class="el" href="structdaos__obj__shard__md.html">daos_obj_shard_md</a> *shard_md, struct <a class="el" href="structpl__target__grp.html">pl_target_grp</a> *tgp_reint, uint32_t *tgt_reint)</td></tr>
<tr class="separator:a4b4440db1cba8cdf6a945d8c8ebb7ad0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75f5dc6913ba3d82d79512c16f50d841"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#a75f5dc6913ba3d82d79512c16f50d841">pl_obj_layout_free</a> (struct <a class="el" href="structpl__obj__layout.html">pl_obj_layout</a> *layout)</td></tr>
<tr class="separator:a75f5dc6913ba3d82d79512c16f50d841"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8d962044478837740efd308c4d6e54c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#ab8d962044478837740efd308c4d6e54c">pl_obj_layout_alloc</a> (unsigned int shard_nr, struct <a class="el" href="structpl__obj__layout.html">pl_obj_layout</a> **layout_pp)</td></tr>
<tr class="separator:ab8d962044478837740efd308c4d6e54c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ee069d68523f138f39be3ac8376c388"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#a3ee069d68523f138f39be3ac8376c388">pl_obj_shard2grp_head</a> (struct <a class="el" href="structdaos__obj__shard__md.html">daos_obj_shard_md</a> *shard_md, struct <a class="el" href="structdaos__oclass__attr.html">daos_oclass_attr</a> *oc_attr)</td></tr>
<tr class="separator:a3ee069d68523f138f39be3ac8376c388"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a053b852486cc09d909b3c739b07df35e"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#a053b852486cc09d909b3c739b07df35e">pl_obj_shard2grp_index</a> (struct <a class="el" href="structdaos__obj__shard__md.html">daos_obj_shard_md</a> *shard_md, struct <a class="el" href="structdaos__oclass__attr.html">daos_oclass_attr</a> *oc_attr)</td></tr>
<tr class="separator:a053b852486cc09d909b3c739b07df35e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6565cdda208c8cb9a354d17b6685b398"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structpl__map.html">pl_map</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#a6565cdda208c8cb9a354d17b6685b398">pl_link2map</a> (d_list_t *link)</td></tr>
<tr class="separator:a6565cdda208c8cb9a354d17b6685b398"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa405b7da1e46eca1a7c10be79b3ad11d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#aa405b7da1e46eca1a7c10be79b3ad11d">pl_hop_rec_free</a> (struct d_hash_table *htab, d_list_t *link)</td></tr>
<tr class="separator:aa405b7da1e46eca1a7c10be79b3ad11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afee1ca3b9493bbcd8fc1baf834238c03"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#afee1ca3b9493bbcd8fc1baf834238c03">pl_map_update</a> (uuid_t uuid, struct <a class="el" href="structpool__map.html">pool_map</a> *<a class="el" href="structpool__map.html">pool_map</a>, bool connect)</td></tr>
<tr class="separator:afee1ca3b9493bbcd8fc1baf834238c03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0ed7b631830aed4c713ade28338ac5f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#ae0ed7b631830aed4c713ade28338ac5f">pl_map_disconnect</a> (uuid_t uuid)</td></tr>
<tr class="separator:ae0ed7b631830aed4c713ade28338ac5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9507b4aeef5a5a28a1b21df43c977d00"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structpl__map.html">pl_map</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#a9507b4aeef5a5a28a1b21df43c977d00">pl_map_find</a> (uuid_t uuid, <a class="el" href="structdaos__obj__id__t.html">daos_obj_id_t</a> <a class="el" href="simple__array_8c.html#aaa43d8da43a7c933a007abe42e86aa1c">oid</a>)</td></tr>
<tr class="separator:a9507b4aeef5a5a28a1b21df43c977d00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a010c0e14b963eb604610bef3a088de77"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#a010c0e14b963eb604610bef3a088de77">pl_map_addref</a> (struct <a class="el" href="structpl__map.html">pl_map</a> *map)</td></tr>
<tr class="separator:a010c0e14b963eb604610bef3a088de77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae022bdf95811a3d6bd74a298a86f6e53"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#ae022bdf95811a3d6bd74a298a86f6e53">pl_map_decref</a> (struct <a class="el" href="structpl__map.html">pl_map</a> *map)</td></tr>
<tr class="separator:ae022bdf95811a3d6bd74a298a86f6e53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e517dd5821fcd224ed111c21984f2f4"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#a7e517dd5821fcd224ed111c21984f2f4">pl_map_version</a> (struct <a class="el" href="structpl__map.html">pl_map</a> *map)</td></tr>
<tr class="separator:a7e517dd5821fcd224ed111c21984f2f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:abeb234fa0fef992af9a0e7de4c8763ad"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structpl__map__ops.html">pl_map_ops</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#abeb234fa0fef992af9a0e7de4c8763ad">ring_map_ops</a></td></tr>
<tr class="separator:abeb234fa0fef992af9a0e7de4c8763ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadd7323a9ae96946c089a3a0cff5531f"><td class="memItemLeft" align="right" valign="top">pthread_rwlock_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#aadd7323a9ae96946c089a3a0cff5531f">pl_rwlock</a> = PTHREAD_RWLOCK_INITIALIZER</td></tr>
<tr class="separator:aadd7323a9ae96946c089a3a0cff5531f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a983c97ec1d34c54b8de84e493718723a"><td class="memItemLeft" align="right" valign="top">struct d_hash_table&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pl__map_8c.html#a983c97ec1d34c54b8de84e493718723a">pl_htable</a></td></tr>
<tr class="separator:a983c97ec1d34c54b8de84e493718723a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="addca8b448ac8b1c3cd941bd6157f54ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addca8b448ac8b1c3cd941bd6157f54ee">&sect;&nbsp;</a></span>D_LOGFAC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define D_LOGFAC&#160;&#160;&#160;DD_FAC(placement)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>(C) Copyright 2016 Intel Corporation.</p>
<p>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at</p>
<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
<p>GOVERNMENT LICENSE RIGHTS-OPEN SOURCE SOFTWARE The Government's rights to use, modify, reproduce, release, perform, display, or disclose this software are subject to the terms of the Apache License as provided in Contract No. B609815. Any reproduction of computer software, computer software documentation, or portions thereof marked with this legend must also reproduce the markings. This file is part of daos_sr</p>
<p><a class="el" href="pl__map_8c.html">src/placement/pl_map.c</a> </p>

<p>Definition at line <a class="el" href="pl__map_8c_source.html#l00028">28</a> of file <a class="el" href="pl__map_8c_source.html">pl_map.c</a>.</p>

</div>
</div>
<a id="a6c06f47a5b8cd4d9ac9eade7844341a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c06f47a5b8cd4d9ac9eade7844341a5">&sect;&nbsp;</a></span>DSR_RING_DOMAIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DSR_RING_DOMAIN&#160;&#160;&#160;<a class="el" href="pool__map_8h.html#ae2b30405dd4e58b5ddec88a49ef99724a7b01525b4f152b5e82cc0ea6915a289e">PO_COMP_TP_RACK</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pl__map_8c_source.html#l00277">277</a> of file <a class="el" href="pl__map_8c_source.html">pl_map.c</a>.</p>

</div>
</div>
<a id="a77be6b09a4f1ea8ffa87b68498a4cda6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77be6b09a4f1ea8ffa87b68498a4cda6">&sect;&nbsp;</a></span>PL_HTABLE_BITS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PL_HTABLE_BITS&#160;&#160;&#160;7</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pl__map_8c_source.html#l00365">365</a> of file <a class="el" href="pl__map_8c_source.html">pl_map.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa405b7da1e46eca1a7c10be79b3ad11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa405b7da1e46eca1a7c10be79b3ad11d">&sect;&nbsp;</a></span>pl_hop_rec_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pl_hop_rec_free </td>
          <td>(</td>
          <td class="paramtype">struct d_hash_table *&#160;</td>
          <td class="paramname"><em>htab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">d_list_t *&#160;</td>
          <td class="paramname"><em>link</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pl__map_8c_source.html#l00349">349</a> of file <a class="el" href="pl__map_8c_source.html">pl_map.c</a>.</p>

</div>
</div>
<a id="a6565cdda208c8cb9a354d17b6685b398"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6565cdda208c8cb9a354d17b6685b398">&sect;&nbsp;</a></span>pl_link2map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structpl__map.html">pl_map</a>* pl_link2map </td>
          <td>(</td>
          <td class="paramtype">d_list_t *&#160;</td>
          <td class="paramname"><em>link</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pl__map_8c_source.html#l00299">299</a> of file <a class="el" href="pl__map_8c_source.html">pl_map.c</a>.</p>

</div>
</div>
<a id="a010c0e14b963eb604610bef3a088de77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a010c0e14b963eb604610bef3a088de77">&sect;&nbsp;</a></span>pl_map_addref()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pl_map_addref </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpl__map.html">pl_map</a> *&#160;</td>
          <td class="paramname"><em>map</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pl__map_8c_source.html#l00483">483</a> of file <a class="el" href="pl__map_8c_source.html">pl_map.c</a>.</p>

</div>
</div>
<a id="a89212de04faaeb1bbbb6089defce0311"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89212de04faaeb1bbbb6089defce0311">&sect;&nbsp;</a></span>pl_map_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pl_map_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpool__map.html">pool_map</a> *&#160;</td>
          <td class="paramname"><em>pool_map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structpl__map__init__attr.html">pl_map_init_attr</a> *&#160;</td>
          <td class="paramname"><em>mia</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structpl__map.html">pl_map</a> **&#160;</td>
          <td class="paramname"><em>pl_mapp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a placement map based on attributes in <em>mia</em> </p>

<p>Definition at line <a class="el" href="pl__map_8c_source.html#l00063">63</a> of file <a class="el" href="pl__map_8c_source.html">pl_map.c</a>.</p>

</div>
</div>
<a id="ae022bdf95811a3d6bd74a298a86f6e53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae022bdf95811a3d6bd74a298a86f6e53">&sect;&nbsp;</a></span>pl_map_decref()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pl_map_decref </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpl__map.html">pl_map</a> *&#160;</td>
          <td class="paramname"><em>map</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pl__map_8c_source.html#l00489">489</a> of file <a class="el" href="pl__map_8c_source.html">pl_map.c</a>.</p>

</div>
</div>
<a id="a5bfde06e847f8730c7a3347826eac965"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bfde06e847f8730c7a3347826eac965">&sect;&nbsp;</a></span>pl_map_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pl_map_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpl__map.html">pl_map</a> *&#160;</td>
          <td class="paramname"><em>map</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroy a placement map </p>

<p>Definition at line <a class="el" href="pl__map_8c_source.html#l00106">106</a> of file <a class="el" href="pl__map_8c_source.html">pl_map.c</a>.</p>

</div>
</div>
<a id="ae0ed7b631830aed4c713ade28338ac5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0ed7b631830aed4c713ade28338ac5f">&sect;&nbsp;</a></span>pl_map_disconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pl_map_disconnect </td>
          <td>(</td>
          <td class="paramtype">uuid_t&#160;</td>
          <td class="paramname"><em>uuid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Drop the pool connection count of <a class="el" href="structpl__map.html">pl_map</a> identified by <em>uuid</em>, evit it from the placement map cache when connection count drops to zero. </p>

<p>Definition at line <a class="el" href="pl__map_8c_source.html#l00448">448</a> of file <a class="el" href="pl__map_8c_source.html">pl_map.c</a>.</p>

</div>
</div>
<a id="a9507b4aeef5a5a28a1b21df43c977d00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9507b4aeef5a5a28a1b21df43c977d00">&sect;&nbsp;</a></span>pl_map_find()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structpl__map.html">pl_map</a>* pl_map_find </td>
          <td>(</td>
          <td class="paramtype">uuid_t&#160;</td>
          <td class="paramname"><em>uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdaos__obj__id__t.html">daos_obj_id_t</a>&#160;</td>
          <td class="paramname"><em>oid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Find the placement map of the pool identified by <em>uuid</em>. </p>

<p>Definition at line <a class="el" href="pl__map_8c_source.html#l00472">472</a> of file <a class="el" href="pl__map_8c_source.html">pl_map.c</a>.</p>

</div>
</div>
<a id="a6d8dbc189a310e5ef9f8dcd10e828638"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d8dbc189a310e5ef9f8dcd10e828638">&sect;&nbsp;</a></span>pl_map_print()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pl_map_print </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpl__map.html">pl_map</a> *&#160;</td>
          <td class="paramname"><em>map</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Print a placement map, it's optional and for debug only </p>

<p>Definition at line <a class="el" href="pl__map_8c_source.html#l00117">117</a> of file <a class="el" href="pl__map_8c_source.html">pl_map.c</a>.</p>

</div>
</div>
<a id="afee1ca3b9493bbcd8fc1baf834238c03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afee1ca3b9493bbcd8fc1baf834238c03">&sect;&nbsp;</a></span>pl_map_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pl_map_update </td>
          <td>(</td>
          <td class="paramtype">uuid_t&#160;</td>
          <td class="paramname"><em>uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structpool__map.html">pool_map</a> *&#160;</td>
          <td class="paramname"><em>pool_map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>connect</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Generate a new placement map from the pool map , and replace the original placement map for the same pool.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uuid</td><td>[IN] uuid of <em><a class="el" href="structpool__map.html">pool_map</a></em> </td></tr>
    <tr><td class="paramname"><a class="el" href="structpool__map.html">pool_map</a></td><td>[IN] <a class="el" href="structpool__map.html">pool_map</a> </td></tr>
    <tr><td class="paramname">connect</td><td>[IN] from pool connect or not </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pl__map_8c_source.html#l00375">375</a> of file <a class="el" href="pl__map_8c_source.html">pl_map.c</a>.</p>

</div>
</div>
<a id="a7e517dd5821fcd224ed111c21984f2f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e517dd5821fcd224ed111c21984f2f4">&sect;&nbsp;</a></span>pl_map_version()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t pl_map_version </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpl__map.html">pl_map</a> *&#160;</td>
          <td class="paramname"><em>map</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pl__map_8c_source.html#l00495">495</a> of file <a class="el" href="pl__map_8c_source.html">pl_map.c</a>.</p>

</div>
</div>
<a id="ad2c45bb543e9fd4a23a4a9909200e48b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2c45bb543e9fd4a23a4a9909200e48b">&sect;&nbsp;</a></span>pl_obj_find_rebuild()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pl_obj_find_rebuild </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpl__map.html">pl_map</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdaos__obj__md.html">daos_obj_md</a> *&#160;</td>
          <td class="paramname"><em>md</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdaos__obj__shard__md.html">daos_obj_shard_md</a> *&#160;</td>
          <td class="paramname"><em>shard_md</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>rebuild_ver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>tgt_rank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>shard_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check if the provided object has any shard needs to be rebuilt for the given rebuild version .</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">map</td><td>[IN] <a class="el" href="structpl__map.html">pl_map</a> this check is performed on </td></tr>
    <tr><td class="paramname">md</td><td>[IN] object metadata </td></tr>
    <tr><td class="paramname">shard_md</td><td>[IN] shard metadata (optional) </td></tr>
    <tr><td class="paramname">rebuild_ver</td><td>[IN] current rebuild version </td></tr>
    <tr><td class="paramname">tgt_rank</td><td>[OUT] spare target rank </td></tr>
    <tr><td class="paramname">shard_id</td><td>[OUT] shard id to be reuilt</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 Rebuild the  on the target . 0 No shard needs be rebuilt. -ve error code. </dd></dl>

<p>Definition at line <a class="el" href="pl__map_8c_source.html#l00157">157</a> of file <a class="el" href="pl__map_8c_source.html">pl_map.c</a>.</p>

</div>
</div>
<a id="a4b4440db1cba8cdf6a945d8c8ebb7ad0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b4440db1cba8cdf6a945d8c8ebb7ad0">&sect;&nbsp;</a></span>pl_obj_find_reint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pl_obj_find_reint </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpl__map.html">pl_map</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdaos__obj__md.html">daos_obj_md</a> *&#160;</td>
          <td class="paramname"><em>md</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdaos__obj__shard__md.html">daos_obj_shard_md</a> *&#160;</td>
          <td class="paramname"><em>shard_md</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structpl__target__grp.html">pl_target_grp</a> *&#160;</td>
          <td class="paramname"><em>tgp_reint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>tgt_reint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check if the provided object shard needs to be built on the reintegrated targets .</p>
<dl class="section return"><dt>Returns</dt><dd>1 Build the object on the returned target . 0 Skip this object. -ve error code. </dd></dl>

<p>Definition at line <a class="el" href="pl__map_8c_source.html#l00180">180</a> of file <a class="el" href="pl__map_8c_source.html">pl_map.c</a>.</p>

</div>
</div>
<a id="ab8d962044478837740efd308c4d6e54c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8d962044478837740efd308c4d6e54c">&sect;&nbsp;</a></span>pl_obj_layout_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pl_obj_layout_alloc </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>shard_nr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structpl__obj__layout.html">pl_obj_layout</a> **&#160;</td>
          <td class="paramname"><em>layout_pp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pl__map_8c_source.html#l00203">203</a> of file <a class="el" href="pl__map_8c_source.html">pl_map.c</a>.</p>

</div>
</div>
<a id="a75f5dc6913ba3d82d79512c16f50d841"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75f5dc6913ba3d82d79512c16f50d841">&sect;&nbsp;</a></span>pl_obj_layout_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pl_obj_layout_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpl__obj__layout.html">pl_obj_layout</a> *&#160;</td>
          <td class="paramname"><em>layout</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pl__map_8c_source.html#l00194">194</a> of file <a class="el" href="pl__map_8c_source.html">pl_map.c</a>.</p>

</div>
</div>
<a id="af1f834ae8650c5cb722e54a7e7b664be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1f834ae8650c5cb722e54a7e7b664be">&sect;&nbsp;</a></span>pl_obj_place()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pl_obj_place </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpl__map.html">pl_map</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdaos__obj__md.html">daos_obj_md</a> *&#160;</td>
          <td class="paramname"><em>md</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdaos__obj__shard__md.html">daos_obj_shard_md</a> *&#160;</td>
          <td class="paramname"><em>shard_md</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structpl__obj__layout.html">pl_obj_layout</a> **&#160;</td>
          <td class="paramname"><em>layout_pp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Compute layout for the input object metadata . It only generates the layout of the redundancy group that  belongs to if  is not NULL. </p>

<p>Definition at line <a class="el" href="pl__map_8c_source.html#l00131">131</a> of file <a class="el" href="pl__map_8c_source.html">pl_map.c</a>.</p>

</div>
</div>
<a id="a3ee069d68523f138f39be3ac8376c388"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ee069d68523f138f39be3ac8376c388">&sect;&nbsp;</a></span>pl_obj_shard2grp_head()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int pl_obj_shard2grp_head </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdaos__obj__shard__md.html">daos_obj_shard_md</a> *&#160;</td>
          <td class="paramname"><em>shard_md</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdaos__oclass__attr.html">daos_oclass_attr</a> *&#160;</td>
          <td class="paramname"><em>oc_attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the index of the first shard of the redundancy group that  belongs to. </p>

<p>Definition at line <a class="el" href="pl__map_8c_source.html#l00229">229</a> of file <a class="el" href="pl__map_8c_source.html">pl_map.c</a>.</p>

</div>
</div>
<a id="a053b852486cc09d909b3c739b07df35e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a053b852486cc09d909b3c739b07df35e">&sect;&nbsp;</a></span>pl_obj_shard2grp_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int pl_obj_shard2grp_index </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdaos__obj__shard__md.html">daos_obj_shard_md</a> *&#160;</td>
          <td class="paramname"><em>shard_md</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdaos__oclass__attr.html">daos_oclass_attr</a> *&#160;</td>
          <td class="paramname"><em>oc_attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the redundancy group index of . </p>

<p>Definition at line <a class="el" href="pl__map_8c_source.html#l00251">251</a> of file <a class="el" href="pl__map_8c_source.html">pl_map.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a983c97ec1d34c54b8de84e493718723a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a983c97ec1d34c54b8de84e493718723a">&sect;&nbsp;</a></span>pl_htable</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct d_hash_table pl_htable</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">    .ht_ops           = NULL,</div><div class="line">}</div></div><!-- fragment --><p>hash table for placement maps </p>

<p>Definition at line <a class="el" href="pl__map_8c_source.html#l00273">273</a> of file <a class="el" href="pl__map_8c_source.html">pl_map.c</a>.</p>

</div>
</div>
<a id="aadd7323a9ae96946c089a3a0cff5531f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadd7323a9ae96946c089a3a0cff5531f">&sect;&nbsp;</a></span>pl_rwlock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_rwlock_t pl_rwlock = PTHREAD_RWLOCK_INITIALIZER</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>serialize operations on pl_htable </p>

<p>Definition at line <a class="el" href="pl__map_8c_source.html#l00271">271</a> of file <a class="el" href="pl__map_8c_source.html">pl_map.c</a>.</p>

</div>
</div>
<a id="abeb234fa0fef992af9a0e7de4c8763ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abeb234fa0fef992af9a0e7de4c8763ad">&sect;&nbsp;</a></span>ring_map_ops</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structpl__map__ops.html">pl_map_ops</a> ring_map_ops</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ring__map_8c_source.html#l01407">1407</a> of file <a class="el" href="ring__map_8c_source.html">ring_map.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
